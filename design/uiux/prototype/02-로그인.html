<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î°úÍ∑∏Ïù∏ - ÏïàÏ†ÑÌïú Ï§ëÍ≥†Í±∞Îûò ÌîåÎû´Ìèº</title>
    <link rel="stylesheet" href="common.css">
    <style>
        /* Î°úÍ∑∏Ïù∏ Ï†ÑÏö© Ïä§ÌÉÄÏùº */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: var(--space-lg);
        }

        .login-card {
            width: 100%;
            max-width: 480px;
            background: var(--surface);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            padding: var(--space-3xl);
            position: relative;
        }

        .login-header {
            text-align: center;
            margin-bottom: var(--space-3xl);
        }

        .login-logo {
            font-size: var(--font-size-h2);
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: var(--space-md);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .login-subtitle {
            color: var(--text-secondary);
            font-size: var(--font-size-body);
            margin-bottom: var(--space-lg);
        }

        .security-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            background: #E8F5E8;
            border-radius: 8px;
            font-size: var(--font-size-body-sm);
            color: #2E7D32;
        }

        .login-form {
            margin-bottom: var(--space-lg);
        }

        .form-group {
            position: relative;
        }

        .form-input {
            padding-right: 48px;
        }

        .input-icon {
            position: absolute;
            right: var(--space-md);
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 20px;
            pointer-events: none;
        }

        .password-toggle {
            position: absolute;
            right: var(--space-md);
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            padding: 4px;
        }

        .login-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
            font-size: var(--font-size-body-sm);
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .find-password {
            color: var(--primary-blue);
            text-decoration: none;
        }

        .find-password:hover {
            text-decoration: underline;
        }

        .login-attempts {
            background: #FFF3E0;
            border: 1px solid var(--light-orange);
            border-radius: 8px;
            padding: var(--space-md);
            margin-bottom: var(--space-md);
            font-size: var(--font-size-body-sm);
            color: var(--dark-orange);
        }

        .two-factor-section {
            margin-top: var(--space-lg);
            padding: var(--space-lg);
            background: #E3F2FD;
            border-radius: 12px;
            border: 1px solid var(--light-blue);
            display: none;
        }

        .two-factor-section.active {
            display: block;
        }

        .auth-method-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .auth-method {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--surface);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: var(--font-size-body-sm);
        }

        .auth-method.selected {
            border-color: var(--primary-blue);
            background: #E3F2FD;
            color: var(--primary-blue);
        }

        .auth-method:hover {
            border-color: var(--light-blue);
        }

        .verification-code-group {
            display: flex;
            gap: var(--space-md);
            align-items: flex-end;
        }

        .verification-code-group .form-group {
            flex: 1;
        }

        .resend-button {
            height: 44px;
            white-space: nowrap;
        }

        .timer {
            color: var(--secondary-orange);
            font-weight: 500;
            font-size: var(--font-size-body-sm);
        }

        .safety-info {
            background: #E8F5E8;
            border-radius: 12px;
            padding: var(--space-lg);
            margin-top: var(--space-lg);
        }

        .safety-info__title {
            font-weight: 600;
            color: #2E7D32;
            margin-bottom: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .safety-info__list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .safety-info__list li {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-xs);
            font-size: var(--font-size-body-sm);
            color: #388E3C;
        }

        .footer-links {
            text-align: center;
            margin-top: var(--space-2xl);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--border);
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: var(--font-size-body-sm);
            margin: 0 var(--space-md);
        }

        .footer-links a:hover {
            color: var(--primary-blue);
            text-decoration: underline;
        }

        .signup-link {
            text-align: center;
            margin-top: var(--space-lg);
            font-size: var(--font-size-body-sm);
            color: var(--text-secondary);
        }

        .signup-link a {
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 500;
        }

        .signup-link a:hover {
            text-decoration: underline;
        }

        /* Î∞òÏùëÌòï ÎîîÏûêÏù∏ */
        @media (max-width: 767px) {
            .login-container {
                padding: var(--space-md);
            }

            .login-card {
                padding: var(--space-lg);
            }

            .auth-method-selector {
                grid-template-columns: 1fr;
            }

            .verification-code-group {
                flex-direction: column;
                align-items: stretch;
            }

            .resend-button {
                height: auto;
                padding: 12px var(--space-lg);
            }
        }

        /* ÏÉàÎ°úÏö¥ Í∏∞Í∏∞ Í∞êÏßÄ Î™®Îã¨ */
        .device-verification-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .device-verification-modal.active {
            display: flex;
        }

        .device-modal-content {
            background: var(--surface);
            border-radius: 16px;
            padding: var(--space-2xl);
            max-width: 480px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .device-info {
            background: #FFF3E0;
            border-radius: 8px;
            padding: var(--space-md);
            margin: var(--space-md) 0;
        }

        .device-info__item {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-xs);
            font-size: var(--font-size-body-sm);
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="login-card">
            <!-- Î°úÍ∑∏Ïù∏ Ìó§Îçî -->
            <div class="login-header">
                <div class="login-logo">
                    üõ°Ô∏è ÏïàÏ†ÑÍ±∞Îûò
                </div>
                <div class="login-subtitle">
                    ÏïàÏ†ÑÌïòÍ≥† Ïã†Î¢∞Ìï† Ïàò ÏûàÎäî Ï§ëÍ≥†Í±∞Îûò
                </div>
                <div class="security-indicator">
                    <span>üîí</span>
                    <span>Îã§Îã®Í≥Ñ Î≥¥Ïïà Ïù∏Ï¶ù</span>
                </div>
            </div>

            <!-- Î°úÍ∑∏Ïù∏ ÏßÑÌñâ Îã®Í≥Ñ -->
            <div class="progress-steps">
                <div class="progress-step current" id="step-1">
                    <div class="progress-step__icon">1</div>
                    <div class="progress-step__label">Í≥ÑÏ†ï ÌôïÏù∏</div>
                </div>
                <div class="progress-step" id="step-2">
                    <div class="progress-step__icon">2</div>
                    <div class="progress-step__label">Î≥¥Ïïà Ïù∏Ï¶ù</div>
                </div>
                <div class="progress-step" id="step-3">
                    <div class="progress-step__icon">3</div>
                    <div class="progress-step__label">Î°úÍ∑∏Ïù∏ ÏôÑÎ£å</div>
                </div>
            </div>

            <!-- Î°úÍ∑∏Ïù∏ Ïã§Ìå® Í≤ΩÍ≥† (ÌïÑÏöîÏãú ÌëúÏãú) -->
            <div class="login-attempts" id="login-attempts" style="display: none;">
                <strong>‚ö†Ô∏è Î°úÍ∑∏Ïù∏ Ïã§Ìå® ÌöüÏàò: <span id="attempt-count">0</span>/5</strong><br>
                5Ìöå Ïã§Ìå®Ïãú Í≥ÑÏ†ïÏù¥ 30Î∂ÑÍ∞Ñ Ïû†Í∏àÎê©ÎãàÎã§.
            </div>

            <!-- 1Îã®Í≥Ñ: Í∏∞Î≥∏ Î°úÍ∑∏Ïù∏ Ìèº -->
            <form class="login-form" id="login-form">
                <div class="form-group">
                    <label for="email" class="form-label">Ïù¥Î©îÏùº ÎòêÎäî ÏïÑÏù¥Îîî</label>
                    <input
                        type="email"
                        id="email"
                        class="form-input focusable"
                        placeholder="Ïù¥Î©îÏùº Ï£ºÏÜåÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"
                        data-validate="email"
                        required
                    >
                    <span class="input-icon">üìß</span>
                    <span class="form-error"></span>
                </div>

                <div class="form-group">
                    <label for="password" class="form-label">ÎπÑÎ∞ÄÎ≤àÌò∏</label>
                    <input
                        type="password"
                        id="password"
                        class="form-input focusable"
                        placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"
                        data-validate="password"
                        required
                    >
                    <button type="button" class="password-toggle" onclick="togglePassword('password')">
                        üëÅÔ∏è
                    </button>
                    <span class="form-error"></span>
                </div>

                <div class="login-options">
                    <label class="remember-me">
                        <input type="checkbox" id="remember">
                        <span>Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú Ïú†ÏßÄ</span>
                    </label>
                    <a href="#" class="find-password">ÎπÑÎ∞ÄÎ≤àÌò∏ Ï∞æÍ∏∞</a>
                </div>

                <button type="submit" class="btn btn--primary btn--large" style="width: 100%;" data-loading="true">
                    <span>Î°úÍ∑∏Ïù∏</span>
                </button>
            </form>

            <!-- 2Îã®Í≥Ñ: 2Ï∞® Ïù∏Ï¶ù -->
            <div class="two-factor-section" id="two-factor-section">
                <h3 style="margin-bottom: var(--space-lg); color: var(--primary-blue);">
                    üîê 2Îã®Í≥Ñ Ïù∏Ï¶ù
                </h3>

                <p style="margin-bottom: var(--space-lg); color: var(--text-secondary); font-size: var(--font-size-body-sm);">
                    Í≥ÑÏ†ï Î≥¥ÏïàÏùÑ ÏúÑÌï¥ Ï∂îÍ∞Ä Ïù∏Ï¶ùÏù¥ ÌïÑÏöîÌï©ÎãàÎã§. Ïù∏Ï¶ù Î∞©Î≤ïÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.
                </p>

                <div class="auth-method-selector">
                    <div class="auth-method selected" data-method="sms">
                        <span>üì±</span>
                        <span>SMS Ïù∏Ï¶ù</span>
                    </div>
                    <div class="auth-method" data-method="email">
                        <span>üìß</span>
                        <span>Ïù¥Î©îÏùº Ïù∏Ï¶ù</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="auth-target" class="form-label" id="auth-target-label">
                        Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä Î∞úÏÜ°Îê† Ìú¥ÎåÄÌè∞ Î≤àÌò∏
                    </label>
                    <input
                        type="text"
                        id="auth-target"
                        class="form-input"
                        value="010-****-5678"
                        readonly
                    >
                </div>

                <div class="verification-code-group">
                    <div class="form-group">
                        <label for="verification-code" class="form-label">Ïù∏Ï¶ùÎ≤àÌò∏</label>
                        <input
                            type="text"
                            id="verification-code"
                            class="form-input"
                            placeholder="6ÏûêÎ¶¨ Ïù∏Ï¶ùÎ≤àÌò∏ ÏûÖÎ†•"
                            maxlength="6"
                        >
                        <span class="form-error"></span>
                    </div>
                    <button type="button" class="btn btn--secondary resend-button" onclick="sendVerificationCode()">
                        Ïù∏Ï¶ùÎ≤àÌò∏ Î∞úÏÜ°
                    </button>
                </div>

                <div class="timer" id="verification-timer" style="display: none;">
                    ÎÇ®ÏùÄ ÏãúÍ∞Ñ: <span id="timer-display">3:00</span>
                </div>

                <button type="button" class="btn btn--primary btn--large" style="width: 100%; margin-top: var(--space-lg);" onclick="verifyCode()">
                    Ïù∏Ï¶ù ÌôïÏù∏
                </button>
            </div>

            <!-- ÏïàÏ†Ñ Í±∞Îûò Ï†ïÎ≥¥ -->
            <div class="safety-info">
                <div class="safety-info__title">
                    üõ°Ô∏è ÏïàÏ†ÑÌïú Í±∞ÎûòÎ•º ÏúÑÌïú Î≥¥Ïïà ÏãúÏä§ÌÖú
                </div>
                <ul class="safety-info__list">
                    <li>‚úÖ Ïã§ÏãúÍ∞Ñ ÏÇ¨Í∏∞ Ìå®ÌÑ¥ Í∞êÏßÄ</li>
                    <li>‚úÖ Îã§Îã®Í≥Ñ ÏÇ¨Ïö©Ïûê Ïù∏Ï¶ù</li>
                    <li>‚úÖ Í±∞Îûò ÎÇ¥Ïó≠ Ìà¨Î™Ö Í≥µÍ∞ú</li>
                    <li>‚úÖ 24ÏãúÍ∞Ñ Î≥¥Ïïà Î™®ÎãàÌÑ∞ÎßÅ</li>
                </ul>
            </div>

            <!-- ÌöåÏõêÍ∞ÄÏûÖ ÎßÅÌÅ¨ -->
            <div class="signup-link">
                ÏïÑÏßÅ Í≥ÑÏ†ïÏù¥ ÏóÜÏúºÏã†Í∞ÄÏöî?
                <a href="01-ÌöåÏõêÍ∞ÄÏûÖ.html">ÌöåÏõêÍ∞ÄÏûÖÌïòÍ∏∞</a>
            </div>

            <!-- Ìë∏ÌÑ∞ ÎßÅÌÅ¨ -->
            <div class="footer-links">
                <a href="#">Ïù¥Ïö©ÏïΩÍ¥Ä</a>
                <a href="#">Í∞úÏù∏Ï†ïÎ≥¥Ï≤òÎ¶¨Î∞©Ïπ®</a>
                <a href="#">Í≥†Í∞ùÏÑºÌÑ∞</a>
            </div>
        </div>
    </div>

    <!-- ÏÉàÎ°úÏö¥ Í∏∞Í∏∞ Í∞êÏßÄ Î™®Îã¨ -->
    <div class="device-verification-modal" id="device-verification-modal">
        <div class="device-modal-content">
            <h3 style="margin-bottom: var(--space-lg); color: var(--warning);">
                üîç ÏÉàÎ°úÏö¥ Í∏∞Í∏∞ÏóêÏÑúÏùò Î°úÍ∑∏Ïù∏ Í∞êÏßÄ
            </h3>

            <div class="alert alert--warning">
                <div class="alert__icon">‚ö†Ô∏è</div>
                <div class="alert__content">
                    <div class="alert__title">Î≥¥Ïïà ÌôïÏù∏ ÌïÑÏöî</div>
                    <div class="alert__message">
                        ÏÉàÎ°úÏö¥ Í∏∞Í∏∞ÏóêÏÑú Î°úÍ∑∏Ïù∏ ÏãúÎèÑÍ∞Ä Í∞êÏßÄÎêòÏóàÏäµÎãàÎã§.
                        Î≥∏Ïù∏Ïù¥ ÎßûÎã§Î©¥ Ï∂îÍ∞Ä Ïù∏Ï¶ùÏùÑ ÏßÑÌñâÌï¥Ï£ºÏÑ∏Ïöî.
                    </div>
                </div>
            </div>

            <div class="device-info">
                <h4 style="margin-bottom: var(--space-md);">Í∏∞Í∏∞ Ï†ïÎ≥¥</h4>
                <div class="device-info__item">
                    <span>IP Ï£ºÏÜå:</span>
                    <span>192.168.1.100</span>
                </div>
                <div class="device-info__item">
                    <span>Ïö¥ÏòÅÏ≤¥Ï†ú:</span>
                    <span>Windows 11</span>
                </div>
                <div class="device-info__item">
                    <span>Î∏åÎùºÏö∞Ï†Ä:</span>
                    <span>Chrome 118.0</span>
                </div>
                <div class="device-info__item">
                    <span>ÏúÑÏπò:</span>
                    <span>ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨</span>
                </div>
                <div class="device-info__item">
                    <span>ÏãúÍ∞Ñ:</span>
                    <span id="current-time">2024-09-23 15:30:45</span>
                </div>
            </div>

            <div class="d-flex gap-2" style="margin-top: var(--space-lg);">
                <button type="button" class="btn btn--secondary" style="flex: 1;" onclick="denyAccess()">
                    Î≥∏Ïù∏Ïù¥ ÏïÑÎãò
                </button>
                <button type="button" class="btn btn--primary" style="flex: 1;" onclick="confirmDevice()">
                    Î≥∏Ïù∏ ÌôïÏù∏
                </button>
            </div>
        </div>
    </div>

    <script src="common.js"></script>
    <script>
        // Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄ Ï†ÑÏö© JavaScript

        let currentStep = 1;
        let failedAttempts = 0;
        let verificationTimer = null;
        let timeLeft = 180; // 3Î∂Ñ

        // ÎπÑÎ∞ÄÎ≤àÌò∏ ÌëúÏãú/Ïà®ÍπÄ ÌÜ†Í∏Ä
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.parentNode.querySelector('.password-toggle');

            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'üôà';
            } else {
                input.type = 'password';
                button.textContent = 'üëÅÔ∏è';
            }
        }

        // Î°úÍ∑∏Ïù∏ Ìèº Ï†úÏ∂ú
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            // ÏûÖÎ†• Í≤ÄÏ¶ù
            if (!FormValidator.validateEmail(email)) {
                FormValidator.showError('email', 'Ïò¨Î∞îÎ•∏ Ïù¥Î©îÏùº Ï£ºÏÜåÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            if (!FormValidator.validatePassword(password)) {
                FormValidator.showError('password', 'ÎπÑÎ∞ÄÎ≤àÌò∏Îäî 8Ïûê Ïù¥ÏÉÅ, ÏòÅÎ¨∏Í≥º Ïà´ÏûêÎ•º Ìè¨Ìï®Ìï¥Ïïº Ìï©ÎãàÎã§.');
                return;
            }

            // Î°úÎî© ÏãúÏûë
            LoadingManager.start('#login-form button[type="submit"]');

            // Î°úÍ∑∏Ïù∏ ÏãúÎÆ¨Î†àÏù¥ÏÖò
            setTimeout(() => {
                LoadingManager.stop('#login-form button[type="submit"]');

                // Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ ÏãúÎÆ¨Î†àÏù¥ÏÖò (Ïã§Ï†úÎ°úÎäî ÏÑúÎ≤ÑÏóêÏÑú Í≤ÄÏ¶ù)
                if (email === 'test@example.com' && password === 'password123') {
                    // ÏÉàÎ°úÏö¥ Í∏∞Í∏∞ Í∞êÏßÄ ÏãúÎÆ¨Î†àÏù¥ÏÖò
                    if (Math.random() > 0.5) {
                        showDeviceVerification();
                    } else {
                        proceedToTwoFactor();
                    }
                } else {
                    // Î°úÍ∑∏Ïù∏ Ïã§Ìå®
                    handleLoginFailure();
                }
            }, 2000);
        });

        // Î°úÍ∑∏Ïù∏ Ïã§Ìå® Ï≤òÎ¶¨
        function handleLoginFailure() {
            failedAttempts++;

            const attemptsElement = document.getElementById('login-attempts');
            const countElement = document.getElementById('attempt-count');

            countElement.textContent = failedAttempts;
            attemptsElement.style.display = 'block';

            if (failedAttempts >= 5) {
                NotificationSystem.show('danger', 'Í≥ÑÏ†ï Ïû†Í∏à', '5Ìöå Ïó∞ÏÜç Î°úÍ∑∏Ïù∏Ïóê Ïã§Ìå®ÌïòÏó¨ Í≥ÑÏ†ïÏù¥ 30Î∂ÑÍ∞Ñ Ïû†Í∏àÎêòÏóàÏäµÎãàÎã§.');
                document.getElementById('login-form').style.display = 'none';
            } else {
                NotificationSystem.show('warning', 'Î°úÍ∑∏Ïù∏ Ïã§Ìå®',
                    `Ïù¥Î©îÏùº ÎòêÎäî ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§. (${failedAttempts}/5)`);
            }
        }

        // ÏÉàÎ°úÏö¥ Í∏∞Í∏∞ ÌôïÏù∏ Î™®Îã¨ ÌëúÏãú
        function showDeviceVerification() {
            document.getElementById('current-time').textContent = new Date().toLocaleString('ko-KR');
            document.getElementById('device-verification-modal').classList.add('active');
        }

        // Í∏∞Í∏∞ Ï†ëÍ∑º Í±∞Î∂Ä
        function denyAccess() {
            document.getElementById('device-verification-modal').classList.remove('active');
            NotificationSystem.show('info', 'Î°úÍ∑∏Ïù∏ Ï∑®ÏÜå', 'Î≥¥ÏïàÏùÑ ÏúÑÌï¥ Î°úÍ∑∏Ïù∏Ïù¥ Ï∑®ÏÜåÎêòÏóàÏäµÎãàÎã§.');
        }

        // Í∏∞Í∏∞ ÌôïÏù∏ ÏôÑÎ£å
        function confirmDevice() {
            document.getElementById('device-verification-modal').classList.remove('active');
            proceedToTwoFactor();
        }

        // 2Îã®Í≥Ñ Ïù∏Ï¶ùÏúºÎ°ú ÏßÑÌñâ
        function proceedToTwoFactor() {
            // ÏßÑÌñâ Îã®Í≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
            updateProgressStep(2);

            // Ìèº Ïà®Í∏∞Í≥† 2Îã®Í≥Ñ Ïù∏Ï¶ù ÌëúÏãú
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('two-factor-section').classList.add('active');

            NotificationSystem.show('info', '2Îã®Í≥Ñ Ïù∏Ï¶ù', 'Î≥¥ÏïàÏùÑ ÏúÑÌï¥ Ï∂îÍ∞Ä Ïù∏Ï¶ùÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
        }

        // ÏßÑÌñâ Îã®Í≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateProgressStep(step) {
            // Ïù¥Ï†Ñ Îã®Í≥ÑÎì§ÏùÑ ÏôÑÎ£åÎ°ú ÌëúÏãú
            for (let i = 1; i < step; i++) {
                document.getElementById(`step-${i}`).classList.add('completed');
                document.getElementById(`step-${i}`).classList.remove('current');
            }

            // ÌòÑÏû¨ Îã®Í≥Ñ ÌëúÏãú
            document.getElementById(`step-${step}`).classList.add('current');
            currentStep = step;
        }

        // Ïù∏Ï¶ù Î∞©Î≤ï ÏÑ†ÌÉù
        document.querySelectorAll('.auth-method').forEach(method => {
            method.addEventListener('click', function() {
                // ÏÑ†ÌÉù ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                document.querySelectorAll('.auth-method').forEach(m => m.classList.remove('selected'));
                this.classList.add('selected');

                const selectedMethod = this.getAttribute('data-method');
                const targetLabel = document.getElementById('auth-target-label');
                const targetInput = document.getElementById('auth-target');

                if (selectedMethod === 'sms') {
                    targetLabel.textContent = 'Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä Î∞úÏÜ°Îê† Ìú¥ÎåÄÌè∞ Î≤àÌò∏';
                    targetInput.value = '010-****-5678';
                } else {
                    targetLabel.textContent = 'Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä Î∞úÏÜ°Îê† Ïù¥Î©îÏùº Ï£ºÏÜå';
                    targetInput.value = 'test@******.com';
                }
            });
        });

        // Ïù∏Ï¶ùÎ≤àÌò∏ Î∞úÏÜ°
        function sendVerificationCode() {
            const button = document.querySelector('.resend-button');
            const selectedMethod = document.querySelector('.auth-method.selected').getAttribute('data-method');

            // Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
            button.disabled = true;
            button.textContent = 'Î∞úÏÜ° Ï§ë...';

            setTimeout(() => {
                button.textContent = 'Ïû¨Î∞úÏÜ°';
                button.disabled = false;

                // ÌÉÄÏù¥Î®∏ ÏãúÏûë
                startVerificationTimer();

                const methodText = selectedMethod === 'sms' ? 'SMS' : 'Ïù¥Î©îÏùº';
                NotificationSystem.show('success', 'Ïù∏Ï¶ùÎ≤àÌò∏ Î∞úÏÜ°',
                    `${methodText}Î°ú Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä Î∞úÏÜ°ÎêòÏóàÏäµÎãàÎã§.`);
            }, 2000);
        }

        // Ïù∏Ï¶ùÎ≤àÌò∏ ÌÉÄÏù¥Î®∏ ÏãúÏûë
        function startVerificationTimer() {
            timeLeft = 180; // 3Î∂Ñ Î¶¨ÏÖã
            const timerElement = document.getElementById('verification-timer');
            const displayElement = document.getElementById('timer-display');

            timerElement.style.display = 'block';

            verificationTimer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                displayElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

                timeLeft--;

                if (timeLeft < 0) {
                    clearInterval(verificationTimer);
                    timerElement.style.display = 'none';
                    NotificationSystem.show('warning', 'Ïù∏Ï¶ùÎ≤àÌò∏ ÎßåÎ£å', 'Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§. Ïû¨Î∞úÏÜ°Ìï¥Ï£ºÏÑ∏Ïöî.');
                }
            }, 1000);
        }

        // Ïù∏Ï¶ùÎ≤àÌò∏ ÌôïÏù∏
        function verifyCode() {
            const code = document.getElementById('verification-code').value;

            if (!code || code.length !== 6) {
                FormValidator.showError('verification-code', '6ÏûêÎ¶¨ Ïù∏Ï¶ùÎ≤àÌò∏Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            // Ïù∏Ï¶ù ÌôïÏù∏ ÏãúÎÆ¨Î†àÏù¥ÏÖò
            LoadingManager.start('.two-factor-section button');

            setTimeout(() => {
                LoadingManager.stop('.two-factor-section button');

                // Ïù∏Ï¶ù ÏÑ±Í≥µ ÏãúÎÆ¨Î†àÏù¥ÏÖò
                if (code === '123456') {
                    loginSuccess();
                } else {
                    FormValidator.showError('verification-code', 'Ïù∏Ï¶ùÎ≤àÌò∏Í∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.');
                }
            }, 1500);
        }

        // Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ
        function loginSuccess() {
            // ÌÉÄÏù¥Î®∏ Ï†ïÎ¶¨
            if (verificationTimer) {
                clearInterval(verificationTimer);
            }

            // ÏßÑÌñâ Îã®Í≥Ñ ÏôÑÎ£å
            updateProgressStep(3);

            // ÏÑ±Í≥µ Î©îÏãúÏßÄ
            NotificationSystem.show('success', 'Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ', 'ÏïàÏ†ÑÌïòÍ≤å Î°úÍ∑∏Ïù∏ÎêòÏóàÏäµÎãàÎã§.');

            // 2Ï¥à ÌõÑ ÎåÄÏãúÎ≥¥ÎìúÎ°ú Ïù¥Îèô
            setTimeout(() => {
                window.location.href = '14-Î©îÏù∏ÎåÄÏãúÎ≥¥Îìú.html';
            }, 2000);
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìúÏãú Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', function() {
            // ÌÖåÏä§Ìä∏Ïö© ÏûêÎèô Î∞úÏÜ° Î≤ÑÌäº (Í∞úÎ∞ú Ìé∏Ïùò)
            setTimeout(() => {
                const sendButton = document.querySelector('.resend-button');
                if (sendButton) {
                    sendButton.click();
                }
            }, 1000);

            // Ïù∏Ï¶ùÎ≤àÌò∏ ÏûÖÎ†•Ïãú ÏûêÎèô Í≤ÄÏ¶ù
            document.getElementById('verification-code').addEventListener('input', function() {
                if (this.value.length === 6) {
                    FormValidator.clearError('verification-code');
                }
            });

            console.log('Login page initialized');
        });
    </script>
</body>
</html>