<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œê·¸ì¸ - ì•ˆì „í•œ ì¤‘ê³ ê±°ë˜ í”Œë«í¼</title>
    <link rel="stylesheet" href="common.css">
    <style>
        /* ë¡œê·¸ì¸ ì „ìš© ìŠ¤íƒ€ì¼ */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: var(--space-lg);
        }

        .login-card {
            width: 100%;
            max-width: 480px;
            background: var(--surface);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            padding: var(--space-3xl);
            position: relative;
        }

        .login-header {
            text-align: center;
            margin-bottom: var(--space-3xl);
        }

        .login-logo {
            font-size: var(--font-size-h2);
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: var(--space-md);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
        }

        .login-subtitle {
            color: var(--text-secondary);
            font-size: var(--font-size-body);
            margin-bottom: var(--space-lg);
        }

        .security-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            background: #E8F5E8;
            border-radius: 8px;
            font-size: var(--font-size-body-sm);
            color: #2E7D32;
        }

        .login-form {
            margin-bottom: var(--space-lg);
        }

        .form-group {
            position: relative;
        }

        .form-input {
            padding-right: 48px;
        }

        .input-icon {
            position: absolute;
            right: var(--space-md);
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 20px;
            pointer-events: none;
        }

        .password-toggle {
            position: absolute;
            right: var(--space-md);
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            padding: 4px;
        }

        .login-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
            font-size: var(--font-size-body-sm);
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .find-password {
            color: var(--primary-blue);
            text-decoration: none;
        }

        .find-password:hover {
            text-decoration: underline;
        }

        .login-attempts {
            background: #FFF3E0;
            border: 1px solid var(--light-orange);
            border-radius: 8px;
            padding: var(--space-md);
            margin-bottom: var(--space-md);
            font-size: var(--font-size-body-sm);
            color: var(--dark-orange);
        }

        .two-factor-section {
            margin-top: var(--space-lg);
            padding: var(--space-lg);
            background: #E3F2FD;
            border-radius: 12px;
            border: 1px solid var(--light-blue);
            display: none;
        }

        .two-factor-section.active {
            display: block;
        }

        .auth-method-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .auth-method {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            border: 2px solid var(--border);
            border-radius: 8px;
            background: var(--surface);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: var(--font-size-body-sm);
        }

        .auth-method.selected {
            border-color: var(--primary-blue);
            background: #E3F2FD;
            color: var(--primary-blue);
        }

        .auth-method:hover {
            border-color: var(--light-blue);
        }

        .verification-code-group {
            display: flex;
            gap: var(--space-md);
            align-items: flex-end;
        }

        .verification-code-group .form-group {
            flex: 1;
        }

        .resend-button {
            height: 44px;
            white-space: nowrap;
        }

        .timer {
            color: var(--secondary-orange);
            font-weight: 500;
            font-size: var(--font-size-body-sm);
        }

        .safety-info {
            background: #E8F5E8;
            border-radius: 12px;
            padding: var(--space-lg);
            margin-top: var(--space-lg);
        }

        .safety-info__title {
            font-weight: 600;
            color: #2E7D32;
            margin-bottom: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .safety-info__list {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .safety-info__list li {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-xs);
            font-size: var(--font-size-body-sm);
            color: #388E3C;
        }

        .footer-links {
            text-align: center;
            margin-top: var(--space-2xl);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--border);
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: var(--font-size-body-sm);
            margin: 0 var(--space-md);
        }

        .footer-links a:hover {
            color: var(--primary-blue);
            text-decoration: underline;
        }

        .signup-link {
            text-align: center;
            margin-top: var(--space-lg);
            font-size: var(--font-size-body-sm);
            color: var(--text-secondary);
        }

        .signup-link a {
            color: var(--primary-blue);
            text-decoration: none;
            font-weight: 500;
        }

        .signup-link a:hover {
            text-decoration: underline;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 767px) {
            .login-container {
                padding: var(--space-md);
            }

            .login-card {
                padding: var(--space-lg);
            }

            .auth-method-selector {
                grid-template-columns: 1fr;
            }

            .verification-code-group {
                flex-direction: column;
                align-items: stretch;
            }

            .resend-button {
                height: auto;
                padding: 12px var(--space-lg);
            }
        }

        /* ìƒˆë¡œìš´ ê¸°ê¸° ê°ì§€ ëª¨ë‹¬ */
        .device-verification-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .device-verification-modal.active {
            display: flex;
        }

        .device-modal-content {
            background: var(--surface);
            border-radius: 16px;
            padding: var(--space-2xl);
            max-width: 480px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .device-info {
            background: #FFF3E0;
            border-radius: 8px;
            padding: var(--space-md);
            margin: var(--space-md) 0;
        }

        .device-info__item {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-xs);
            font-size: var(--font-size-body-sm);
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="login-card">
            <!-- ë¡œê·¸ì¸ í—¤ë” -->
            <div class="login-header">
                <div class="login-logo">
                    ğŸ›¡ï¸ ì•ˆì „ê±°ë˜
                </div>
                <div class="login-subtitle">
                    ì•ˆì „í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¤‘ê³ ê±°ë˜
                </div>
                <div class="security-indicator">
                    <span>ğŸ”’</span>
                    <span>ë‹¤ë‹¨ê³„ ë³´ì•ˆ ì¸ì¦</span>
                </div>
            </div>

            <!-- ë¡œê·¸ì¸ ì§„í–‰ ë‹¨ê³„ -->
            <div class="progress-steps">
                <div class="progress-step current" id="step-1">
                    <div class="progress-step__icon">1</div>
                    <div class="progress-step__label">ê³„ì • í™•ì¸</div>
                </div>
                <div class="progress-step" id="step-2">
                    <div class="progress-step__icon">2</div>
                    <div class="progress-step__label">ë³´ì•ˆ ì¸ì¦</div>
                </div>
                <div class="progress-step" id="step-3">
                    <div class="progress-step__icon">3</div>
                    <div class="progress-step__label">ë¡œê·¸ì¸ ì™„ë£Œ</div>
                </div>
            </div>

            <!-- ë¡œê·¸ì¸ ì‹¤íŒ¨ ê²½ê³  (í•„ìš”ì‹œ í‘œì‹œ) -->
            <div class="login-attempts" id="login-attempts" style="display: none;">
                <strong>âš ï¸ ë¡œê·¸ì¸ ì‹¤íŒ¨ íšŸìˆ˜: <span id="attempt-count">0</span>/5</strong><br>
                5íšŒ ì‹¤íŒ¨ì‹œ ê³„ì •ì´ 30ë¶„ê°„ ì ê¸ˆë©ë‹ˆë‹¤.
            </div>

            <!-- 1ë‹¨ê³„: ê¸°ë³¸ ë¡œê·¸ì¸ í¼ -->
            <form class="login-form" id="login-form">
                <div class="form-group">
                    <label for="email" class="form-label">ì´ë©”ì¼ ë˜ëŠ” ì•„ì´ë””</label>
                    <input
                        type="email"
                        id="email"
                        class="form-input focusable"
                        placeholder="ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                        data-validate="email"
                        required
                    >
                    <span class="input-icon">ğŸ“§</span>
                    <span class="form-error"></span>
                </div>

                <div class="form-group">
                    <label for="password" class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
                    <input
                        type="password"
                        id="password"
                        class="form-input focusable"
                        placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                        data-validate="password"
                        required
                    >
                    <button type="button" class="password-toggle" onclick="togglePassword('password')">
                        ğŸ‘ï¸
                    </button>
                    <span class="form-error"></span>
                </div>

                <div class="login-options">
                    <label class="remember-me">
                        <input type="checkbox" id="remember">
                        <span>ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€</span>
                    </label>
                    <a href="#" class="find-password">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
                </div>

                <button type="submit" class="btn btn--primary btn--large" style="width: 100%;" data-loading="true">
                    <span>ë¡œê·¸ì¸</span>
                </button>
            </form>

            <!-- 2ë‹¨ê³„: 2ì°¨ ì¸ì¦ -->
            <div class="two-factor-section" id="two-factor-section">
                <h3 style="margin-bottom: var(--space-lg); color: var(--primary-blue);">
                    ğŸ” 2ë‹¨ê³„ ì¸ì¦
                </h3>

                <p style="margin-bottom: var(--space-lg); color: var(--text-secondary); font-size: var(--font-size-body-sm);">
                    ê³„ì • ë³´ì•ˆì„ ìœ„í•´ ì¶”ê°€ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤. ì¸ì¦ ë°©ë²•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.
                </p>

                <div class="auth-method-selector">
                    <div class="auth-method selected" data-method="sms">
                        <span>ğŸ“±</span>
                        <span>SMS ì¸ì¦</span>
                    </div>
                    <div class="auth-method" data-method="email">
                        <span>ğŸ“§</span>
                        <span>ì´ë©”ì¼ ì¸ì¦</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="auth-target" class="form-label" id="auth-target-label">
                        ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë  íœ´ëŒ€í° ë²ˆí˜¸
                    </label>
                    <input
                        type="text"
                        id="auth-target"
                        class="form-input"
                        value="010-****-5678"
                        readonly
                    >
                </div>

                <div class="verification-code-group">
                    <div class="form-group">
                        <label for="verification-code" class="form-label">ì¸ì¦ë²ˆí˜¸</label>
                        <input
                            type="text"
                            id="verification-code"
                            class="form-input"
                            placeholder="6ìë¦¬ ì¸ì¦ë²ˆí˜¸ ì…ë ¥"
                            maxlength="6"
                        >
                        <span class="form-error"></span>
                    </div>
                    <button type="button" class="btn btn--secondary resend-button" onclick="sendVerificationCode()">
                        ì¸ì¦ë²ˆí˜¸ ë°œì†¡
                    </button>
                </div>

                <div class="timer" id="verification-timer" style="display: none;">
                    ë‚¨ì€ ì‹œê°„: <span id="timer-display">3:00</span>
                </div>

                <button type="button" class="btn btn--primary btn--large" style="width: 100%; margin-top: var(--space-lg);" onclick="verifyCode()">
                    ì¸ì¦ í™•ì¸
                </button>
            </div>

            <!-- ì•ˆì „ ê±°ë˜ ì •ë³´ -->
            <div class="safety-info">
                <div class="safety-info__title">
                    ğŸ›¡ï¸ ì•ˆì „í•œ ê±°ë˜ë¥¼ ìœ„í•œ ë³´ì•ˆ ì‹œìŠ¤í…œ
                </div>
                <ul class="safety-info__list">
                    <li>âœ… ì‹¤ì‹œê°„ ì‚¬ê¸° íŒ¨í„´ ê°ì§€</li>
                    <li>âœ… ë‹¤ë‹¨ê³„ ì‚¬ìš©ì ì¸ì¦</li>
                    <li>âœ… ê±°ë˜ ë‚´ì—­ íˆ¬ëª… ê³µê°œ</li>
                    <li>âœ… 24ì‹œê°„ ë³´ì•ˆ ëª¨ë‹ˆí„°ë§</li>
                </ul>
            </div>

            <!-- íšŒì›ê°€ì… ë§í¬ -->
            <div class="signup-link">
                ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?
                <a href="01-íšŒì›ê°€ì….html">íšŒì›ê°€ì…í•˜ê¸°</a>
            </div>

            <!-- í‘¸í„° ë§í¬ -->
            <div class="footer-links">
                <a href="#">ì´ìš©ì•½ê´€</a>
                <a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
                <a href="#">ê³ ê°ì„¼í„°</a>
            </div>
        </div>
    </div>

    <!-- ìƒˆë¡œìš´ ê¸°ê¸° ê°ì§€ ëª¨ë‹¬ -->
    <div class="device-verification-modal" id="device-verification-modal">
        <div class="device-modal-content">
            <h3 style="margin-bottom: var(--space-lg); color: var(--warning);">
                ğŸ” ìƒˆë¡œìš´ ê¸°ê¸°ì—ì„œì˜ ë¡œê·¸ì¸ ê°ì§€
            </h3>

            <div class="alert alert--warning">
                <div class="alert__icon">âš ï¸</div>
                <div class="alert__content">
                    <div class="alert__title">ë³´ì•ˆ í™•ì¸ í•„ìš”</div>
                    <div class="alert__message">
                        ìƒˆë¡œìš´ ê¸°ê¸°ì—ì„œ ë¡œê·¸ì¸ ì‹œë„ê°€ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.
                        ë³¸ì¸ì´ ë§ë‹¤ë©´ ì¶”ê°€ ì¸ì¦ì„ ì§„í–‰í•´ì£¼ì„¸ìš”.
                    </div>
                </div>
            </div>

            <div class="device-info">
                <h4 style="margin-bottom: var(--space-md);">ê¸°ê¸° ì •ë³´</h4>
                <div class="device-info__item">
                    <span>IP ì£¼ì†Œ:</span>
                    <span>192.168.1.100</span>
                </div>
                <div class="device-info__item">
                    <span>ìš´ì˜ì²´ì œ:</span>
                    <span>Windows 11</span>
                </div>
                <div class="device-info__item">
                    <span>ë¸Œë¼ìš°ì €:</span>
                    <span>Chrome 118.0</span>
                </div>
                <div class="device-info__item">
                    <span>ìœ„ì¹˜:</span>
                    <span>ì„œìš¸ì‹œ ê°•ë‚¨êµ¬</span>
                </div>
                <div class="device-info__item">
                    <span>ì‹œê°„:</span>
                    <span id="current-time">2024-09-23 15:30:45</span>
                </div>
            </div>

            <div class="d-flex gap-2" style="margin-top: var(--space-lg);">
                <button type="button" class="btn btn--secondary" style="flex: 1;" onclick="denyAccess()">
                    ë³¸ì¸ì´ ì•„ë‹˜
                </button>
                <button type="button" class="btn btn--primary" style="flex: 1;" onclick="confirmDevice()">
                    ë³¸ì¸ í™•ì¸
                </button>
            </div>
        </div>
    </div>

    <script src="common.js"></script>
    <script>
        // ë¡œê·¸ì¸ í˜ì´ì§€ ì „ìš© JavaScript

        let currentStep = 1;
        let failedAttempts = 0;
        let verificationTimer = null;
        let timeLeft = 180; // 3ë¶„

        // ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.parentNode.querySelector('.password-toggle');

            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'ğŸ™ˆ';
            } else {
                input.type = 'password';
                button.textContent = 'ğŸ‘ï¸';
            }
        }

        // ë¡œê·¸ì¸ í¼ ì œì¶œ
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            // ì…ë ¥ ê²€ì¦
            if (!FormValidator.validateEmail(email)) {
                FormValidator.showError('email', 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!FormValidator.validatePassword(password)) {
                FormValidator.showError('password', 'ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒ, ì˜ë¬¸ê³¼ ìˆ«ìë¥¼ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            // ë¡œë”© ì‹œì‘
            LoadingManager.start('#login-form button[type="submit"]');

            // ë¡œê·¸ì¸ ì‹œë®¬ë ˆì´ì…˜
            setTimeout(() => {
                LoadingManager.stop('#login-form button[type="submit"]');

                // ë¡œê·¸ì¸ ì„±ê³µ ì‹œë®¬ë ˆì´ì…˜ (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ê²€ì¦)
                if (email === 'test@example.com' && password === 'password123') {
                    // ìƒˆë¡œìš´ ê¸°ê¸° ê°ì§€ ì‹œë®¬ë ˆì´ì…˜
                    if (Math.random() > 0.5) {
                        showDeviceVerification();
                    } else {
                        proceedToTwoFactor();
                    }
                } else {
                    // ë¡œê·¸ì¸ ì‹¤íŒ¨
                    handleLoginFailure();
                }
            }, 2000);
        });

        // ë¡œê·¸ì¸ ì‹¤íŒ¨ ì²˜ë¦¬
        function handleLoginFailure() {
            failedAttempts++;

            const attemptsElement = document.getElementById('login-attempts');
            const countElement = document.getElementById('attempt-count');

            countElement.textContent = failedAttempts;
            attemptsElement.style.display = 'block';

            if (failedAttempts >= 5) {
                NotificationSystem.show('danger', 'ê³„ì • ì ê¸ˆ', '5íšŒ ì—°ì† ë¡œê·¸ì¸ì— ì‹¤íŒ¨í•˜ì—¬ ê³„ì •ì´ 30ë¶„ê°„ ì ê¸ˆë˜ì—ˆìŠµë‹ˆë‹¤.');
                document.getElementById('login-form').style.display = 'none';
            } else {
                NotificationSystem.show('warning', 'ë¡œê·¸ì¸ ì‹¤íŒ¨',
                    `ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. (${failedAttempts}/5)`);
            }
        }

        // ìƒˆë¡œìš´ ê¸°ê¸° í™•ì¸ ëª¨ë‹¬ í‘œì‹œ
        function showDeviceVerification() {
            document.getElementById('current-time').textContent = new Date().toLocaleString('ko-KR');
            document.getElementById('device-verification-modal').classList.add('active');
        }

        // ê¸°ê¸° ì ‘ê·¼ ê±°ë¶€
        function denyAccess() {
            document.getElementById('device-verification-modal').classList.remove('active');
            NotificationSystem.show('info', 'ë¡œê·¸ì¸ ì·¨ì†Œ', 'ë³´ì•ˆì„ ìœ„í•´ ë¡œê·¸ì¸ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ê¸°ê¸° í™•ì¸ ì™„ë£Œ
        function confirmDevice() {
            document.getElementById('device-verification-modal').classList.remove('active');
            proceedToTwoFactor();
        }

        // 2ë‹¨ê³„ ì¸ì¦ìœ¼ë¡œ ì§„í–‰
        function proceedToTwoFactor() {
            // ì§„í–‰ ë‹¨ê³„ ì—…ë°ì´íŠ¸
            updateProgressStep(2);

            // í¼ ìˆ¨ê¸°ê³  2ë‹¨ê³„ ì¸ì¦ í‘œì‹œ
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('two-factor-section').classList.add('active');

            NotificationSystem.show('info', '2ë‹¨ê³„ ì¸ì¦', 'ë³´ì•ˆì„ ìœ„í•´ ì¶”ê°€ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.');
        }

        // ì§„í–‰ ë‹¨ê³„ ì—…ë°ì´íŠ¸
        function updateProgressStep(step) {
            // ì´ì „ ë‹¨ê³„ë“¤ì„ ì™„ë£Œë¡œ í‘œì‹œ
            for (let i = 1; i < step; i++) {
                document.getElementById(`step-${i}`).classList.add('completed');
                document.getElementById(`step-${i}`).classList.remove('current');
            }

            // í˜„ì¬ ë‹¨ê³„ í‘œì‹œ
            document.getElementById(`step-${step}`).classList.add('current');
            currentStep = step;
        }

        // ì¸ì¦ ë°©ë²• ì„ íƒ
        document.querySelectorAll('.auth-method').forEach(method => {
            method.addEventListener('click', function() {
                // ì„ íƒ ìƒíƒœ ì—…ë°ì´íŠ¸
                document.querySelectorAll('.auth-method').forEach(m => m.classList.remove('selected'));
                this.classList.add('selected');

                const selectedMethod = this.getAttribute('data-method');
                const targetLabel = document.getElementById('auth-target-label');
                const targetInput = document.getElementById('auth-target');

                if (selectedMethod === 'sms') {
                    targetLabel.textContent = 'ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë  íœ´ëŒ€í° ë²ˆí˜¸';
                    targetInput.value = '010-****-5678';
                } else {
                    targetLabel.textContent = 'ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë  ì´ë©”ì¼ ì£¼ì†Œ';
                    targetInput.value = 'test@******.com';
                }
            });
        });

        // ì¸ì¦ë²ˆí˜¸ ë°œì†¡
        function sendVerificationCode() {
            const button = document.querySelector('.resend-button');
            const selectedMethod = document.querySelector('.auth-method.selected').getAttribute('data-method');

            // ë²„íŠ¼ ë¹„í™œì„±í™”
            button.disabled = true;
            button.textContent = 'ë°œì†¡ ì¤‘...';

            setTimeout(() => {
                button.textContent = 'ì¬ë°œì†¡';
                button.disabled = false;

                // íƒ€ì´ë¨¸ ì‹œì‘
                startVerificationTimer();

                const methodText = selectedMethod === 'sms' ? 'SMS' : 'ì´ë©”ì¼';
                NotificationSystem.show('success', 'ì¸ì¦ë²ˆí˜¸ ë°œì†¡',
                    `${methodText}ë¡œ ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            }, 2000);
        }

        // ì¸ì¦ë²ˆí˜¸ íƒ€ì´ë¨¸ ì‹œì‘
        function startVerificationTimer() {
            timeLeft = 180; // 3ë¶„ ë¦¬ì…‹
            const timerElement = document.getElementById('verification-timer');
            const displayElement = document.getElementById('timer-display');

            timerElement.style.display = 'block';

            verificationTimer = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                displayElement.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

                timeLeft--;

                if (timeLeft < 0) {
                    clearInterval(verificationTimer);
                    timerElement.style.display = 'none';
                    NotificationSystem.show('warning', 'ì¸ì¦ë²ˆí˜¸ ë§Œë£Œ', 'ì¸ì¦ë²ˆí˜¸ê°€ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì¬ë°œì†¡í•´ì£¼ì„¸ìš”.');
                }
            }, 1000);
        }

        // ì¸ì¦ë²ˆí˜¸ í™•ì¸
        function verifyCode() {
            const code = document.getElementById('verification-code').value;

            if (!code || code.length !== 6) {
                FormValidator.showError('verification-code', '6ìë¦¬ ì¸ì¦ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì¸ì¦ í™•ì¸ ì‹œë®¬ë ˆì´ì…˜
            LoadingManager.start('.two-factor-section button');

            setTimeout(() => {
                LoadingManager.stop('.two-factor-section button');

                // ì¸ì¦ ì„±ê³µ ì‹œë®¬ë ˆì´ì…˜
                if (code === '123456') {
                    loginSuccess();
                } else {
                    FormValidator.showError('verification-code', 'ì¸ì¦ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                }
            }, 1500);
        }

        // ë¡œê·¸ì¸ ì„±ê³µ
        function loginSuccess() {
            // íƒ€ì´ë¨¸ ì •ë¦¬
            if (verificationTimer) {
                clearInterval(verificationTimer);
            }

            // ì§„í–‰ ë‹¨ê³„ ì™„ë£Œ
            updateProgressStep(3);

            // ì„±ê³µ ë©”ì‹œì§€
            NotificationSystem.show('success', 'ë¡œê·¸ì¸ ì„±ê³µ', 'ì•ˆì „í•˜ê²Œ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');

            // 2ì´ˆ í›„ ëŒ€ì‹œë³´ë“œë¡œ ì´ë™
            setTimeout(() => {
                window.location.href = '14-ë©”ì¸ëŒ€ì‹œë³´ë“œ.html';
            }, 2000);
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // í…ŒìŠ¤íŠ¸ìš© ìë™ ë°œì†¡ ë²„íŠ¼ (ê°œë°œ í¸ì˜)
            setTimeout(() => {
                const sendButton = document.querySelector('.resend-button');
                if (sendButton) {
                    sendButton.click();
                }
            }, 1000);

            // ì¸ì¦ë²ˆí˜¸ ì…ë ¥ì‹œ ìë™ ê²€ì¦
            document.getElementById('verification-code').addEventListener('input', function() {
                if (this.value.length === 6) {
                    FormValidator.clearError('verification-code');
                }
            });

            console.log('Login page initialized');
        });
    </script>
</body>
</html>